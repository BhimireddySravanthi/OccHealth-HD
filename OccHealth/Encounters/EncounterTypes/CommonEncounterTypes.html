<form id = 'frmcommonET' name = 'frmcommonET'>
<div ng-controller="CommonEncounterTypesCtrl" data-ng-init="getEncounterDetails()">
    <div encounter-type-nav-bar-dir encounter-type-nav-bar-options="navBarOptions" ng-if="showSubNavbars">
    </div>
    <br />
    <div class="row">
        <div class="col-sm-12">
            <h3 class="panel-title">
                {{'lblGeneralDetails'| translate}}</h3>
            <hr>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10">
                <div class="padding">
                    <div class="form-horizontal">

                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblWorkRelated'| translate}} <span class="text-danger">*</span></label>
                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" name="workrelated" ng-model="CommonEncounterTypes.WorkRelated"
                                        ng-value="true" class="" />{{'lblYes'| translate}}
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="workrelated" ng-model="CommonEncounterTypes.WorkRelated"
                                        ng-value="false" class="" />{{'lblNo'| translate}}
                                </label>
                            </div>
                        </div>
                        <div class="form-group" ng-if="CommonEncounterTypes.WorkRelated == true">
                            <label class="control-label col-sm-4">
                                {{'lblIncidentID'| translate}}</label>
                            <div class="col-sm-8">
                                <select class="form-control" id="ddlIncidentList" ng-model="CommonEncounterTypes.IncidentID">
                                    <option ng-repeat="incident in incidentList" value="{{incident.ID}}">{{incident.Text}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12" >
            <h3 class="panel-title">
                {{divName}} Details</h3>
            <hr>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10">
                <div class="padding">
                    <div class="form-horizontal">
                        <div class="form-group" ng-show="showField == true">
                            <label class="control-label col-sm-4">{{'lblEncounterReasonDescription'| translate}}</label>
                            <div class="col-sm-8">
                                <textarea class="form-control" rows="4" cols="50" ng-model="CommonEncounterTypes.EncounterReason" maxlength="2000"
                                    ng-trim="false"></textarea>
                                <span class="form-help pull-right text-muted" ng-class="(CommonEncounterTypes.EncounterReason.length > 2000) ? 'text-danger' : null">
                                    <strong>{{2000-CommonEncounterTypes.EncounterReason.length}} Characters Left </strong>
                                </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblDisposition'| translate}}</label>
                            <div class="col-sm-8">
                                <select class="form-control" ng-model="CommonEncounterTypes.DispositionTypeID">
                                    <option ng-repeat="DispositionType in DispositionTypeList" value="{{DispositionType.ID}}">
                                        {{DispositionType.Text}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblNotes'| translate}}
                            </label>
                            <div class="col-sm-8">
                                <textarea class="form-control" rows="4" cols="50" ng-model="CommonEncounterTypes.TestNotes" maxlength="2000"
                                    ng-trim="false"></textarea>
                                <span class="form-help pull-right text-muted" ng-class="(CommonEncounterTypes.TestNotes.length > 2000) ? 'text-danger' : null">
                                    <strong>{{2000-CommonEncounterTypes.TestNotes.length}} Characters Left </strong>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <h3 class="panel-title">
                {{'lblEncounterStatusFollowupDetails'| translate}}</h3>
            <hr>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-10">
                <div class="padding">
                    <div class="form-horizontal">
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblEncounterCompleted'| translate}}<span class="text-danger">*</span></label>
                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" name="encCompleted" ng-model="CommonEncounterTypes.EncounterStatus"
                                        ng-value="1002" />Yes
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="encCompleted" ng-model="CommonEncounterTypes.EncounterStatus"
                                        ng-value="1003" />No
                                </label>
                            </div>
                        </div>
                        <div class="form-group" ng-show="CommonEncounterTypes.EncounterStatus == 1003">
                            <label class="control-label col-sm-4">
                                {{'lblReasonEncounterIncomplete'| translate}} <span class="text-danger">*</span></label>
                            <div class="col-sm-8">
                                <input class="form-control" ng-model="CommonEncounterTypes.ReasonEncounterIncomplete" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblReferredFor'| translate}}
                            </label>
                            <div class="col-sm-8">
                                <select class="form-control" ng-model="CommonEncounterTypes.DiagnosticMethodID">
                                    <option ng-repeat="DiagnosticMethod in DiagnosticMethodList" value="{{DiagnosticMethod.ID}}">
                                        {{DiagnosticMethod.Text}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="control-label col-sm-4">
                                {{'lblScheduleFollowUp'| translate}}</label>
                            <div class="col-sm-8">
                                <label class="radio-inline">
                                    <input type="radio" name="scheduleFollowUp" ng-model="CommonEncounterTypes.ScheduleFollowUp"
                                        ng-value="true" class="" />Yes
                                </label>
                                <label class="radio-inline">
                                    <input type="radio" name="scheduleFollowUp" ng-model="CommonEncounterTypes.ScheduleFollowUp" ng-disabled= "FieldDisabled"
                                        ng-value="false" class="" />No
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row" ng-show="CommonEncounterTypes.ScheduleFollowUp == true">
        <div class="col-sm-12">
            <h3 class="panel-title">
                {{'lblScheduleFollowUpAppointment'| translate}}</h3>
            <hr>
        </div>
    </div>
    <div class="container-fluid" ng-show="CommonEncounterTypes.ScheduleFollowUp == true">
        <div class="row">
            <div class="col-md-10">
                <div class="padding">
                    <div class="form-horizontal" schedule-Follow-Up></div>
                </div>
            </div>
        </div>
    </div>

    <div class="well button-group">
     <div class="signature-stamp">
       <i> <p ng-show="CommonEncounterTypes.UpdatedBy!=null && CommonEncounterTypes.UpdatedBy!=0 && CommonEncounterTypes.CreatedBy!=null && CommonEncounterTypes.CreatedBy!=0">

         {{'lblCreatedBy'|translate}}  {{ CommonEncounterTypes.CreatedByName}} {{'lblon'|translate}} {{ CommonEncounterTypes.CreatedDate}}.  
         {{'lblLastUpdatedBy'|translate}}  {{ CommonEncounterTypes.UpdatedByName}} {{'lblon'|translate}} {{ CommonEncounterTypes.UpdatedDate}}.
           </p>
           <p ng-show="(CommonEncounterTypes.UpdatedBy==null || CommonEncounterTypes.UpdatedBy==0) && (CommonEncounterTypes.CreatedBy!=null && CommonEncounterTypes.CreatedBy!=0)">

          {{'lblCreatedBy'|translate}}  {{ CommonEncounterTypes.CreatedByName}} {{'lblon'|translate}} {{ CommonEncounterTypes.CreatedDate}}.  
           </p>
           </i>
    </div>
        <a class="btn btn-default" ng-click="cancel()">{{'btnCancel'|translate}}</a> <a class="btn btn-info"
            ng-click="save()" ng-show="funPermissionCheck(450011,'SelfOthers',CommonEncounterTypes.CreatedBy)">
            {{'btnSave'|translate}}<i ng-if="loadingAction" class="fa fa-spinner fa-spin"></i></a>
    </div>
     <loading-overlay ng-init="showLoadingOverlay = false" show-loading-overlay="showLoadingOverlay"></loading-overlay>
</div>
</form>